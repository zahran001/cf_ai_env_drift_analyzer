name = "cf_ai_env_drift_analyzer"
main = "src/worker.ts"
compatibility_date = "2025-01-15"

# Good default for local dev if your UI is on a different port.
[dev]
port = 8787

# Durable Objects binding for environment pair storage
[[durable_objects.bindings]]
name = "ENVPAIR_DO"
class_name = "EnvPairDO"
script_name = "cf_ai_env_drift_analyzer"

# Durable Object class versioning with SQLite support
# Required for Cloudflare to track DO class changes across deployments
# SQL schema is initialized lazily in src/storage/envPairDO.ts:initializeSchema()
# new_sqlite_classes: enables state.storage.sql for DO-local SQLite
[[migrations]]
tag = "v1"
new_sqlite_classes = ["EnvPairDO"]

# Workers AI binding for LLM integration (Llama 3.3)
[ai]
binding = "AI"

# Workflows binding for comparison orchestration
[[workflows]]
name = "COMPARE_WORKFLOW"
binding = "COMPARE_WORKFLOW"
class_name = "CompareEnvironments"
